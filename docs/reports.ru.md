# Отчеты

## Обзор

API Coverage генерирует два типа отчетов:
1. HTML-отчет - Визуальное представление покрытия API
2. JSON-отчет - Машиночитаемый формат для дальнейшей обработки

## HTML-отчет

HTML-отчет предоставляет визуальное представление покрытия API со следующими разделами:

### Заголовок
- Заголовок и описание отчета
- Общий процент покрытия
- Статистика покрытия (общее количество, покрытые, частично покрытые и непокрытые эндпоинты)

### Навигация
- Вкладки для всех, непокрытых, частично покрытых и покрытых эндпоинтов
- Функция поиска
- Фильтрация по тегам

### Детали эндпоинтов
Для каждого эндпоинта отчет показывает:
- Путь и HTTP-метод
- Краткое описание и описание
- Теги
- Ожидаемые коды статуса
- Записанные запросы с:
  - Временной меткой
  - Кодом статуса
  - Временем ответа
  - Деталями запроса/ответа (если включено)

### Значки покрытия
- Зеленый: Полностью покрытый эндпоинт
- Желтый: Частично покрытый эндпоинт
- Красный: Непокрытый эндпоинт

## JSON-отчет

JSON-отчет содержит детальные данные о покрытии в машиночитаемом формате:

```json
{
  "metadata": {
    "timestamp": "2024-03-20T12:00:00Z",
    "swaggerUrl": "https://api.example.com/swagger.json",
    "totalEndpoints": 100,
    "coveredEndpoints": 80,
    "partialEndpoints": 15,
    "missingEndpoints": 5,
    "coveragePercentage": 87.5
  },
  "endpoints": [
    {
      "path": "/api/users",
      "method": "GET",
      "summary": "Получить пользователей",
      "description": "Возвращает список пользователей",
      "tags": ["users"],
      "status": "covered",
      "expectedStatusCodes": [200, 400, 404],
      "requests": [
        {
          "timestamp": "2024-03-20T12:00:00Z",
          "statusCode": 200,
          "responseTime": 150
        }
      ]
    }
  ]
}
```

## Настройка отчетов

### Настройка HTML-отчета

Вы можете настроить HTML-отчет следующим образом:

1. Используя пользовательский шаблон:
```javascript
const apiCoverage = new ApiCoverage({
  reportTemplate: './custom-template.ejs'
});
```

2. Устанавливая заголовок и описание отчета:
```javascript
const apiCoverage = new ApiCoverage({
  reportTitle: 'Мой отчет о покрытии API',
  reportDescription: 'Отчет о покрытии для Моего API'
});
```

### Настройка JSON-отчета

Вы можете настроить JSON-отчет следующим образом:

1. Включая/отключая генерацию JSON-отчета:
```javascript
const apiCoverage = new ApiCoverage({
  generateJsonReport: true
});
```

2. Устанавливая пользовательский путь для JSON-отчета:
```javascript
const apiCoverage = new ApiCoverage({
  jsonReportPath: 'coverage/api-coverage.json'
});
```

## Генерация отчетов

Отчеты генерируются с помощью метода `generateReport`:

```javascript
await apiCoverage.generateReport();
```

Это выполнит следующие действия:
1. Расчет статистики покрытия
2. Генерация HTML-отчета
3. Генерация JSON-отчета (если включено)
4. Сохранение отчетов в указанную выходную директорию

## Лучшие практики

1. **Регулярная генерация отчетов**: Генерируйте отчеты регулярно для отслеживания прогресса покрытия
2. **Контроль версий**: Включайте отчеты в систему контроля версий для отслеживания истории покрытия
3. **Интеграция с CI/CD**: Генерируйте отчеты как часть вашего CI/CD пайплайна
4. **Пользовательские шаблоны**: Используйте пользовательские шаблоны для специфичных потребностей организации
5. **Обработка JSON**: Используйте JSON-отчеты для автоматизированного анализа и отчетности
6. **Хранение отчетов**: Реализуйте политику хранения для исторических отчетов
7. **Обмен отчетами**: Делитесь отчетами с членами команды и заинтересованными сторонами
8. **Анализ отчетов**: Регулярно анализируйте отчеты для выявления пробелов в покрытии 